<!DOCTYPE html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    
    <meta itemprop="name" content="בלוג פשוט">
    <meta itemprop="description" content="צר עולמי כ  U+200A">

    
    <meta name="twitter:title" content="בלוג פשוט">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="צר עולמי כ  U+200A">
    <meta name="twitter:site" content="@yehudab">
    <meta name="twitter:creator" content="@yehudab">
    <meta name="twitter:image:src" content="">

    
    <meta name="og:title" content="בלוג פשוט">
    <meta name="og:description" content="צר עולמי כ  U+200A">
    <meta name="og:image" content="">
    <meta name="og:url" content="https://yehudab.com/">
    <meta name="og:site_name" content="בלוג פשוט">
    <meta name="og:locale" content="en_GB">
    <meta name="og:type" content="website">

    <link rel="icon" type="image/x-icon" href="/favicon.ico"/>

    <title>
      
      
      בלוג פשוט</title>

    <link rel="stylesheet" href="/assets/main.bundle.css">

    
  </head>
  <body class="flex flex-col min-h-screen">
    <header>
  <nav class="container mx-auto max-w-3xl px-8 pt-2 flex flex-wrap justify-between">
    <div>
      <h1>
        <a href="/">בלוג פשוט</a>
      </h1>
      <p>צר עולמי כ  U+200A</p>
    </div>

    <ul class="flex flex-wrap sm:w-32 w-full mt-6 md:justify-between justify-evenly">
      <li>
        <a href="/blog/about">אודות</a>
      </li>
    </ul>
  </nav>
</header>
    <main class="container mx-auto max-w-3xl p-8 flex-grow">
      
  <div>
    
        
            <div class="mb-8 border-dotted border-b pb-8 border-gray-600">
                <h2>
                    <a class="block" href="/blog/2022/09/1/">שביל ישראל 1 - ארץ ירדן וחרמונים</a>
                </h2>

                <p class="excerpt"></p>

                <span class="block md:inline md:float-left md:pt-4 pt-2 created-date" datetime="Mon Sep 26 2022 13:11:34 GMT+0000 (Coordinated Universal Time)">
                    26 בספטמבר 2022
                </span>

                <a class="tag" href="/tag/שביל ישראל">שביל ישראל</a>
                <div class="clear-both"></div>

                <div class="content post">
                    <p>מתחילים בעצם בקטע לא רשמי מבית אוסישקין בקיבוץ דן. הקטע הזה הוצא מהשביל הרשמי לפני שנה בגלל שחלק ממנו עובד על כביש מסוכן, והשביל רשמית מתחיל עכשיו בתל-חי.</p>
<p>בכל זאת, אנחנו מתחילים בקטע זה, ועל האזור המסוכן נדלג. נפגשים ליד השער המפורסם, מקבלים את הציוד שהזמנו (חולצה, מקלות הליכה וספל רב פעמי) ויוצאים לדרך. הטיול מנוהל ע״י חברת <a href="https://www.al-hashvil.co.il">על-השביל</a> והיום נכיר את עמרי האחראי על הלוגיסטיקה ואת שמוליק (שמואל יוסף, אבל לא עגנון) המדריך. עומרי מאוד מתרגש וחלק מההתרגשות עוברת גם אלינו. בקבוצה כ-40 איש, רובם זוגות בגילאי 30 עד פנסיה. עוד לא עשינו סבב הכרות רשמי, אז רק בעוד חודש נדע קצת יותר עליהם.</p>
<p><img src="/img/2022/09/shvil-1-1.jpeg" alt="תמונה קבוצתית - בית אוסישקין" title="תמונה קבוצתית - בית אוסישקין"></p>
<p>אחרי הקפצת חלק מהרכבים לסיום בגן הצפון ותדריך קצר, יוצאים לדרך. ההתחלה עוברת בדרך עפר רחבה ומדי פעם חוצים אותנו כלי רכב וטרקטרונים. נקווה שבהמשך נראה פחות מהם.</p>
<p>עצירה ראשונה מחוץ לאתר ארכיאולוגי בתל דן. שמוליק המדריך מסביר בהתרגשות על <a href="https://he.wikipedia.org/wiki/%D7%AA%D7%9C_%D7%93%D7%9F#%D7%9B%D7%AA%D7%95%D7%91%D7%AA_%D7%AA%D7%9C_%D7%93%D7%9F" title="כתובת תל דן">ממצא</a> שהתגלה כאן לפני כ-30 שנה עם המילים ״בית דוד״ וגרם לטובי הפרופסורים בארץ להרבה כאב ראש. לי לא ממש ברורה המהומה, אבל בנתיים נניח לזה. כאן גם נגיע לשתי נקודות ״שיא״ בשביל: הנקודה הכי מזרחית ומעט אחריה הנקודה הכי צפונית. חידה למשתתפים: מה הנקודה הכי מערבית? מנסים לנחש אבל לא ממש מצליחים.</p>
<p>בדרך עוברים אותנו שני שביליסטים אמיתיים עם חצי בית על הגב ואנחנו מאחלים להם בהצלחה וקצת מקנאים. בדרכים הרחבות המדריך מוביל בקצב יחסית מהיר (כ-4-5 קמ״ש) אבל יש הרבה עצירות בדרך. הקטע הזה (בוודאי אחרי הקיצור) נחשב קל, ועמרי מדגיש כמה פעמים במהלך היום שמי שהתקשה היום אז זה כנראה לא בשבילו. בעצירה הבאה מתחת לעץ שיזף אנחנו מקבלים הסברים על הר החרמון שמאחורינו, ועל מקור השם (חרם - קדוש) בגלל ברית בין הבתרים שלפי המסורת התרחשה לא רחוק מאיתנו, ועכשיו נמצאת בשטח צבאי סגור. מקבלים גם הסבר על השבר הסורי-אפריקאי והשיזף שהגיע מאפריקה; על קו צינור הנפט שעבר בגולן; ועל ומה בעצם עושים עם כל המים שזורמים בנחל דן שמתחילים את דרכם כמים הכי טהורים כמעט בעולם, וגומרים בכינרת אחרי שסחפו אליהם את כל חומרי ההדברה והדישון בשדות של החולה. לא נעים.</p>
<p><img src="/img/2022/09/shvil-1-2.jpeg" alt="מפל בשמורת החצבאני" title="מפל בשמורת החצבאני"></p>
<p>חוצים נחל קטן וממשיכים לכיוון החצבאני (נחל שניר). קצת לפני הכניסה לשמורה אנחנו עוצרים ליד עץ אקליפטוס ענק ומקבלים הסבר על הכפר רג׳ר שנמצא בהמשך הדרך וחציו בישראל וחציו בלבנון. עדיין ליד העץ שמוליק מקריא קטע ״שכתב המשורר לפני 2000 שנה״:</p>
<p>עַל־כֵּ֗ן אֶ֭זְכָּרְךָ מֵאֶ֣רֶץ יַרְדֵּ֑ן וְ֝חֶרְמוֹנִ֗ים מֵהַ֥ר מִצְעָֽר׃<br>
תְּהוֹם־אֶל־תְּה֣וֹם ק֭וֹרֵא לְק֣וֹל צִנּוֹרֶ֑יךָ<br>
כָּֽל־מִשְׁבָּרֶ֥יךָ וְ֝גַלֶּ֗יךָ עָלַ֥י עָבָֽרוּ׃</p>
<p>אני תוהה מי המשורר, אבל לא שואל, ומי שכן שואלת זוכה מיד לתשובה שזה קטע מתהילים והמשורר הוא כמובן דוד מלך. קצת מביך, אבל כולנו נלמד קצת יותר על המקורות במסע הזה, וזו התחלה טובה.</p>
<p>החלק האחרון של השביל להיום עובר בשמורת נחל שניר. כמו שאמרתי, לקבוצה יש צוות לוגיסטיקה כך שאיסוף כרטיסי המטמון והתשלום למי שאין נעשה מראש, ואנחנו לא מתעכבים. עוצרים לצהרים וכוס תה צמחים שהוכן עבורנו ואז מתחילים בחלק הכי נחמד להיום (ואולי בשביל בכלל): הליכה במים בתוך הנחל. ההליכה כאן לא ארוכה, אבל צריך להיזהר לא להחליק. אחרי שהנחל מתרחב ונרגע קצת אנחנו עוצרים לטבילה יותר משמעותית. לאורך היום ליוותה אותנו דמות מסתורית שקיבלנו עליה רמזים לאורך הדרך. הזוכה שניחש נכון מקבל פרס: מקל עץ שגולף למקל הליכה.</p>
<p><img src="/img/2022/09/shvil-1-4.jpeg" alt="טבילה קרירה בחצבאני" title="טבילה קרירה בחצבאני"></p>
<p>מגיעים לגן הצפון שם מחכות לנו המכוניות שהוקפצו בבוקר. הרדיו ברכב שלוקח אותי להתחלה מנגן את ״ערימה של חברה״ ואני מתחיל לעכל את זה שמסע של שש שנים התחיל היום.</p>
<p><strong>הקטע במספרים:</strong></p>
<p>קטע מספר: 1/60</p>
<p>נקודת התחלה: בית אוסישקין</p>
<p>נקודת סיום: גן הצפון</p>
<p>מרחק הליכה: 7.93 ק״מ</p>
<p>סה״כ עליה: 13 מ׳</p>
<p>סה״כ ירידה: 103 מ׳</p>
<p>גובה מינימלי: 93 מ׳</p>
<p>גובה מקסימלי: 199 מ׳</p>
<p>זמן הליכה נטו: 2:18 שעות</p>
<p>זמן כולל: 4:23 שעות</p>
<p>מהירות ממוצעת: 1.8 קמ״ש</p>
<p><img src="/img/2022/09/shvil-1-5.jpeg" alt=""></p>

                </div>
            </div>
        
    
        
            <div class="mb-8 border-dotted border-b pb-8 border-gray-600">
                <h2>
                    <a class="block" href="/blog/2022/04/geotag-dslr-photos/">תיוג מיקום במצלמת DSLR</a>
                </h2>

                <p class="excerpt"></p>

                <span class="block md:inline md:float-left md:pt-4 pt-2 created-date" datetime="Sat Apr 23 2022 08:37:27 GMT+0000 (Coordinated Universal Time)">
                    23 באפריל 2022
                </span>

                <a class="tag" href="/tag/Geotagging">Geotagging</a><a class="tag" href="/tag/קוד פתוח ותוכנה חופשית">קוד פתוח ותוכנה חופשית</a>
                <div class="clear-both"></div>

                <div class="content post">
                    <p>אחרי שנים רבות של צילום במצלמת הטלפון בלבד, החלטתי לחזור למקורות ולקנות מצלמה דיגיטלית ״אמיתית״. בחרתי <a href="https://www.dpreview.com/products/canon/slrs/canon_eos2000d" title="Canon EOS 2000D">בדגם כניסה של Canon</a>, וצימדתי לו <a href="https://www.dpreview.com/products/canon/lenses/canon_50_1p8_stm" title="Canon EF 50mm F1.8 STM">עדשת פריים טובה</a>, ועוד כמה עדשות זום סבירות.</p>
<p>את הבסיס לשימוש במצלמה למדתי דרך כמה <a href="https://www.youtube.com/user/JaredPolin" title="Jared Polin">ערוצים</a> <a href="https://www.youtube.com/channel/UC9lyUdwosxq_OxC1uggjUPA" title="Photo Genius">פופלריים</a> ב youtube והשאר מניסיון. מה שבעיקר היה חסר לי בצילום במצלמה הזאת (וכנראה נכון למספר גדול מאוד של דגמים, כולל יקרים הרבה יותר) הוא חוסר היכולת לתייג בקלות את מיקום התמונות. זה פחות מפריע אם מצלמים בארוע במקום ידוע, ויותר בעייתי כאשר מצלמים בטיולים.</p>
<p>לחלק מהדגמים אפשר <a href="https://www.bhphotovideo.com/c/product/847538-REG/Canon_6363B001_GPS_Receiver_GP_E2.html" title="Canon GPS Receiver GP-E2">לצמד GPS חיצוני</a>. דגמים אחרים מאפשרים לתייג תוך כדי צילום ע״י אפליקציה שרצה במקביל על הטלפון, אבל זה מחייב הפעלת Wi-Fi על שני המכשירים וגוזלת אחוזי סוללה נכבדים תוך כדי שימוש. בכל מקרה, למצלמה שלי לא ניתן לחבר את המכשיר החיצוני, וגם דרך האפליקציה הרשמית של קנון לא הצלחתי לתייג תוך כדי תנועה. יותר מזה, כאשר הטלפון מחובר ל Wi-Fi של המצלמה, אין אפשרות להתחבר במקביל לאינטרנט.</p>
<p>כדי לפתור את הבעיה, פיתחתי תהליך עבודה פשוט (יחסית...). התהליך כולל שלושה שלבים:</p>
<ol>
<li>
<p>הקלטת מסלול ההליכה. את זה אני בדרך-כלל עושה ממילא כדי לדעת נתונים כמו מרחק וקצב ההליכה, כמות עליות וירידות, ולפעמים כדי למצוא את הרכב בסוף המסלול. אני משתמש באפליקציה החינמית <a href="https://www.gaiagps.com">Gaia GPS</a>, אבל כל אפליקציה שיודעת ליצא קבצי GPX של המסלול תעשה את העבודה. במקרה של האפליקציה הזאת, ההקלטה גם נשמרת בענן, ואפשר בקלות להוריד אותה למחשב דרך האתר שלהם:</p>
<p><img src="/img/2022/04/gaia-gps-export-to-gpx.png" alt=""></p>
</li>
<li>
<p>סינכרון הזמנים בין שעון המצלמה לשעון הטלפון. לכל צורך מעשי, מספיק לעדכן פעם בשבוע-שבועיים את שעון המצלמה. מצד שני, לכל צורך מעשי כנראה מספיק לצלם בטלפון, אז לא בשביל זה באנו לכאן... מה שאני עושה הוא לצלם במצלמת ה DSLR קוד QR שמוצג על הטלפון ומתחלף כל שניה ומכיל את התאריך והשעה המדוייקים. הצילום מכיל כמטא-דתה את השעה בשעון המצלמה, וה QR מקודד את השעה המדוייקת וכך ניתן לדעת מה ההפרש. הייתי בטוח שיש המון אפליקציות שמציגות את השעה ב-QR-ית, אבל לא מצאתי. מה שכן מצאתי הוא <a href="https://github.com/kaelhem/qr-clock" title="QR clock by kaelhem">אפליקציית ווב בקוד פתוח</a>, אבל היא הציגה את התאריך בפורמט לא נח לפרסור, אז <a href="https://github.com/yehudab/qr-clock" title="QR clock GitHub repo">מיזלגתי אותה</a> והעלתי עותק פרטי <a href="https://apps.yehudab.com/qr-clock/" title="QR Clock">לאתר שלי</a>. ככה נראה צילום כזה:</p>
<p><img src="/img/2022/04/qr-clock.jpg" alt=""></p>
</li>
<li>
<p>הורדת קבצי ההליכה והתמונות (כולל תמונת ה QR) למחשב והפעלת סקריפט שמתייג את המיקום תוך כדי ההתחשבות בהפרש הזמנים. לשם כך אני משתמש בשתי תוכנות בקוד פתוח: <a href="https://github.com/mchehab/zbar" title="zbar GitHub repo">zbar</a> שיודעת לחלץ את השעה מקוד ה QR, ו-<a href="https://exiftool.org">ExifTool</a> שיודעת לחלץ את שעת הצילום מתמונת שעון ה-QR  ולתייג מיקום ע״פ קובץ GPX והפרש זמנים. את הסקריפט עצמו (גרסה למק, יתכן שלא יעבוד as-is בלינוקס) אפשר למצוא ב <a href="https://github.com/yehudab/things/blob/main/geotag.sh" title="geotag.sh in GitHub">GitHub שלי</a>.</p>
<p>בהנחה שהקלטת המסלול נשמרה בקובץ: track.pgx, תמונת שעון ה QR נשמרה בקובץ qr.jpeg, וכל התמונות מהמסלול הזה נשמרו בתיקיה הנוכחית, הפעלת הסקירפט נעשית ע״י שורה אחת:</p>
</li>
</ol>
<pre class="language-bash"><code class="language-bash">geotag.sh qr.jpeg track.gpx</code></pre>
<p>עכשיו נוכל לראות את התמונות בדיוק במקום שבו הן צולמו:</p>
<p><img src="/img/2022/04/photo-in-gaig-gps-after-geo-tagging.png" alt=""></p>

                </div>
            </div>
        
    
        
            <div class="mb-8 border-dotted border-b pb-8 border-gray-600">
                <h2>
                    <a class="block" href="/blog/2020/12/back-to-the-mac/">חזרה למק</a>
                </h2>

                <p class="excerpt"></p>

                <span class="block md:inline md:float-left md:pt-4 pt-2 created-date" datetime="Mon Dec 14 2020 21:39:00 GMT+0000 (Coordinated Universal Time)">
                    14 בדצמבר 2020
                </span>

                <a class="tag" href="/tag/מק">מק</a>
                <div class="clear-both"></div>

                <div class="content post">
                    <p>אז אחרי יותר מחמש שנים שבהם המחשב העיקרי שלי היה מבוסס חלונות, החלטתי לחזור למק. למה עכשיו? כי לא מזמן אפל עברו לייצר את המעבד למחשבי המק בעצמם (כמו שעשו בשנים האחרונות לאייפון ולאייפד), וזה מרגיש לי קצת כמו המעבר שעשו לפני כ-15 שנה מ PowerPC למעבדי אינטל. אז גם קניתי את המק הראשון שלי, איימק 17 אינץ׳ עם 1.5 ג׳יגה זכרון. הפעם הלכתי על מקבוק אייר, עם 16 ג׳יגה זכרון.</p>
<p><img src="/img/2020/12/newmac.jpeg" alt=""></p>
<p>בנתיים המחשב מרגיש חזק ומהיר (וקר...) למרות שביום הראשון המעבד עובד קשה על אינדוקס תמונות ומיילים.  בהמשך אפרסם פוסט אחרי תקופת שימוש ארוכה יותר: האם ההייפ מהמעבד החדש באמת מוצלח? האם יש קשיים עם אפליקציות מסויימות? האם האייר יכול לעמוד במשימות כבדות כמו פיתוח תוכנה או עיבודי תמונה מורכבים?</p>

                </div>
            </div>
        
    
        
            <div class="mb-8 border-dotted border-b pb-8 border-gray-600">
                <h2>
                    <a class="block" href="/blog/2020/10/staticman-for-11ty-comments/">ניהול תגובות באמצעות staticman</a>
                </h2>

                <p class="excerpt"></p>

                <span class="block md:inline md:float-left md:pt-4 pt-2 created-date" datetime="Sat Oct 03 2020 10:18:58 GMT+0000 (Coordinated Universal Time)">
                    3 באוקטובר 2020
                </span>

                <a class="tag" href="/tag/staticman">staticman</a><a class="tag" href="/tag/11ty">11ty</a>
                <div class="clear-both"></div>

                <div class="content post">
                    <p>ב<a href="/blog/2020/08/11ty-howto-migrate/" title="מוורדפרס ל-11ty">פוסט הקודם</a> הסברתי איך לייבא את התגובות הישנות מ Wordpress ל-<a href="https://www.11ty.dev/">11ty</a>. בפוסט הזה, אראה איך להתקין שרת <a href="https://staticman.net/">Staticman</a>, ואיך לחבר אליו את טופס התגובות באתר.</p>
<p><img src="/img/2020/10/staticman-logo.png" alt="Staticman logo">
Staticman logo by <a href="http://erlen.co.uk">Erlen Masson</a></p>
<p>גם הפעם הסתמכתי על <a href="https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html" title="Adding Staticman Comments by Travis Downs">מדריך קיים</a> שחיבר Travis Downs עבור שילוב Staticman בבלוג מבוסס Jekyll. בסופו של דבר, ביצעתי את השלבים הבאים:</p>
<ol>
<li><a href="https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html#set-up-github-bot-account">יצירת חשבון בוט ב GitHub</a> (לגמרי לפי המדריך הנ&quot;ל)</li>
<li><a href="https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html#configuring-staticmanyml">הגדרות staticman.yml</a> (גם כן לפי המדריך)</li>
<li>הגדרות staticman בתוך <code>src/globals/site.json</code>. כאן יש הבדל לעומת המדריך, מכוון שקובץ זה יחודי ל 11ty, ובמדריך ההתיחסות היא לסביבת Jekyll. בכל מקרה, העקרונות דומים, ו<a href="https://github.com/yehudab/11r/blob/master/src/includes/comments.njk" title="site.json">כאן</a> תוכלו לראות את ההגדרות שלי.</li>
<li><a href="https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html#set-up-the-api-bridge">הקמת שרת staticman</a>. אחרי יצירת המפתחות, בחרתי בדרך שונה מהמומלץ (הקמה דרך Heroku), ובמקום זה העלתי שרת עצמאי שרץ דרך docker. בניגוד למוסבר בדקומנטציה, כאן יש חוסר <a href="https://github.com/eduardoboucas/staticman/blob/master/docs/docker.md">בתיעוד המקורי</a>, ויש לזכור להגדיר את מפתחות ההצפנה בקובץ <a href="https://github.com/eduardoboucas/staticman/blob/master/docker-compose.yml">docker-compose.yml</a></li>
<li><a href="https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html#invite-and-accept-bot-to-blog-repo" title="Invite and Accept Bot to Blog Repo">הזמנת הבוט להשתתף ב repo</a> (ע&quot;פ המדריך)</li>
<li><a href="https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html#enable-recaptcha" title="Enable reCAPTCHA">הפעלת reCAPCHA</a> - בעיקר על פי המדריך. יש לשים לב שבחלק המתייחס ל <code>‎_config.yml</code> יש לבצע את השינויים במקום זאת ב <code>src/globals/site.json</code></li>
<li><a href="https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html#integrate-comments-into-site" title="Integrate Comments Into Site">שילוב התגובות באתר</a>. כאן ההבדלים מעט יותר משמעותיים, הן בגלל ההבדלים בין Jekyll ל-11ty, והן בגלל הרצון שלי לתמוך בקינון מעבר לרמה אחת. בנוסף, לא אהבתי את ה JS של הפוסט המקורי שמשתש במעורב ב jQuery ו-Vanilla JS. במקום זה השתמשתי בספריה רזה יותר בשם <a href="https://github.com/fabiospampinato/cash">cash</a>, שמאפשרת סינטקס דמוי jQuery במחיר של תמיכה בפחות פיצ'רים ופחות דפדפנים ישנים (אבל עדיין תומכת ב IE11). על הצגת התגובות כתבתי בפוסט הקודם. העבודה על טופס התגובות החדשות מסתכמת בסופו של דבר בקבצי ה <a href="https://github.com/yehudab/11r/blob/master/src/includes/comment-form.njk" title="comment-form.njk">HTML</a>, <a href="https://github.com/yehudab/11r/blob/master/src/styles/comments.css" title="comments.css">CSS</a>, ו-<a href="https://github.com/yehudab/11r/blob/master/src/scripts/comment-form.js" title="comment-form.js">JS </a>אותם תוכלו לראות ב repo הסופי.</li>
</ol>
<p>מוזמנים להגיב למטה ולראות איך כל ה flow עובד. עד לאישור, תוכלו לצפות בתגובות שלכם באזור ה <a href="https://github.com/yehudab/11r/pulls">Pull Requests</a> של הבלוג.</p>

                </div>
            </div>
        
    
        
            <div class="mb-8 border-dotted border-b pb-8 border-gray-600">
                <h2>
                    <a class="block" href="/blog/2020/08/11ty-howto-migrate/">מוורדפרס ל-11ty</a>
                </h2>

                <p class="excerpt"></p>

                <span class="block md:inline md:float-left md:pt-4 pt-2 created-date" datetime="Sat Aug 01 2020 15:00:54 GMT+0000 (Coordinated Universal Time)">
                    1 באוגוסט 2020
                </span>

                <a class="tag" href="/tag/Nunjucks">Nunjucks</a><a class="tag" href="/tag/Comments">Comments</a><a class="tag" href="/tag/11ty">11ty</a><a class="tag" href="/tag/וורדפרס">וורדפרס</a>
                <div class="clear-both"></div>

                <div class="content post">
                    <p>אז אחרי שמחליטים על מעבר ל-11ty, צריך לדאוג לשמר את תוכן הפוסטים והתגובות.</p>
<p>בשלב הראשון של המעבר יש צורך ליצא את כל התוכן מוורדפרס ל-Markdown. לטובת זה השתמשתי בפלאגאין לוורדפרס שפותח דווקא עבור Gatsby ונקרא: <a href="https://wordpress.org/plugins/wp-gatsby-markdown-exporter/">WP Gatsby Markdown Exporter</a>. בקישור ניתן לקרוא כיצד להפעיל אותו. אני השתמשתי באופציית ה <a href="https://wp-cli.org/" title="WordPress Command Line">WP-CLI</a>. משום מה הייתה לו בעיה ליצא את התמונות, ולכן הפעלתי את האופציות שמנטרלות את החלק הזה. הפקודה הסופית הייתה:</p>
<pre class="language-bash"><code class="language-bash">wp gatsby-markdown-export --skip_copy_uploads --skip_original_images --directory<span class="token operator">=</span>/var/www/html/md-export</code></pre>
<p>זה מייצר אוסף של קבצי Markdown, שנראה בערך ככה:</p>
<p><img src="/img/2020/08/export.png" alt="היררכיית קבצים לאחר היצוא מוורפרס"></p>
<p>שמות הקבצים בכל תיקייה נלקחים מה slag, ולמזלי הקפדתי לאורך השנים להשתמש בשמות באנגלית, כך שכעת קל למצוא את הפוסטים לפי שנה, חודש וה slag.</p>
<p>בשלב הבא בחרתי ב starter project מתוך <a href="https://jamstackthemes.dev/ssg/eleventy/" title="Eleventy Themes">דף התבניות של Eleventy</a>. המבחר די דל, ואין עדיין אף תבנית מותאמת עברית. לבסוף, בחרתי בתבנית <a href="https://github.com/reeseschultz/11r">11r</a>.  זוהי תבנית dark mode, ומבוססת <a href="https://tailwindcss.com/">Tailwind CSS</a>, ורוב היפוכי הכוון הגיעו out of the box, ברגע שהוספתי <code>dir=rtl</code> לתגית הראשית של הדף. את התוצאה אחרי הגיור תוכלו למזלג <a href="https://github.com/yehudab/11r">מהריפו שלי</a>. את הפוסטים בהיררכיה המקורית מעלים לתיקיית <code>src/posts</code>, ואחרי מעקב אחרי ההוראות בREADME, אפשר לראות את התוצאה.</p>
<p>החלק היותר מורכב בתהליך הוא תמיכה בתגובות. כאן עדיין אין פתרון בית-ספר, ונאלצתי לאלתר <a href="https://github.com/dKab/blog/blob/master/_includes/comments.liquid">מכמה</a> <a href="https://travisdowns.github.io/blog/2020/02/05/now-with-comments.html">מקורות</a>. הבעיה הבסיסית היא שאתר סטטי מטיבו אינו מאפשר הוספת תוכן דינמי כמו תגובות. אחד הפתרון האפשריים הוא שימוש בתוסף צד שלישי כמו <a href="https://disqus.com/">Disqus</a>, אבל <a href="https://fatfrogmedia.com/delete-disqus-comments-wordpress/" title="Why I Deleted Disqus and Why You Should Too">הדעה</a> <a href="https://markosaric.com/remove-disqus/" title="Why you should remove Disqus from your site">המקובלת</a> בקרב בעלי האתרים הסטטים הוא שזה לא לעניין, הן בגלל <a href="https://markosaric.com/remove-disqus/#site-speed-and-performance">תוספת הקוד לכל דף</a>, והן בגלל טענות על <a href="https://twitter.com/martingund/status/1207327648093003777" title="disqus shared the personal data of tens of millions of users ">הפרת פרטיות של משתמשי המערכת</a>.</p>
<p>האפשרות שאני בחרתי בה היא שימוש ב <a href="https://staticman.net/">Staticman</a>. הרעיון כאן הוא שכל תגובה היא בעצם קובץ שנשמר גם כן בgit, ומנגנון אישור התגובה נעשה באופן דומה לאישור Pull Request. המנוע של Staticman דואג לייצר את ה PR-ים, כך שמבחינת המשתמשים באתר שליחת התגובה מתבצעת באמצעות טופס על הדף, בדומה לוורדפרס.</p>
<p>בנוסף לזה, יש צורך לייבא ולשמר את התגובות מהבלוג הישן. כאן השתמשתי <a href="https://github.com/arthurlacoste/wordpress-comments-jekyll-staticman">בכלי</a> שבמקור נכתב לטובת העברת תגובות לאתרים סטטים מבוססי <a href="https://jekyllrb.com/">Jekyll</a>. נדרשו שינויים קלים, אבל בסופו של דבר גם כאן זה מסתכם בהרצה לפי ה README, והוספה של כל קבצי התגובות תחת התיקיה <a href="https://github.com/yehudab/11r/tree/master/11r/src/globals/comments"><code>src/globals/comments</code></a> כך שכל התגובות לפוסט מסויים מרוכזות תחת תיקיה לפי ה slag של הפוסט. מי שמעוניין יכול לקרוא עוד על <a href="https://www.11ty.dev/docs/data-global/">מודל הנתונים של Eleventy</a>.</p>
<p>התוספת האחרונה היא מעט קוד שידע לשלוף את התגובות המתאימות לכל פוסט ולהציג אותן לפי ההיררכיה המקורית. הקוד הזה מחולק בין קוד JS, שאותו ניתן למצוא ב <code>/filters/comments-tree.js</code> ונראה כך:</p>
<pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> allComments <span class="token operator">=</span> obj <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> commentsById <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  allComments<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    c<span class="token punctuation">.</span>id <span class="token operator">=</span> c<span class="token punctuation">.</span>id <span class="token operator">||</span> c<span class="token punctuation">.</span>_id<span class="token punctuation">;</span><br>    commentsById<span class="token punctuation">[</span>c<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> rootComments <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  allComments<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>parentId <span class="token operator">&amp;&amp;</span> c<span class="token punctuation">.</span>parentId <span class="token operator">!==</span> <span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">const</span> parent <span class="token operator">=</span> commentsById<span class="token punctuation">[</span>c<span class="token punctuation">.</span>parentId<span class="token punctuation">]</span><span class="token punctuation">;</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        parent<span class="token punctuation">.</span>replies <span class="token operator">=</span> parent<span class="token punctuation">.</span>replies <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        parent<span class="token punctuation">.</span>replies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">can't find parentID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>c<span class="token punctuation">.</span>parentId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> for ID: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>c<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      rootComments<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> rootComments<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>והחלק המשלים שנמצא בתבנית התגובות <a href="https://github.com/yehudab/11r/blob/master/src/includes/comments.njk"><code>src/includes/comments.njk</code></a>. על ריקורסיה ב nunjucks למדתי <a href="https://github.com/mozilla/nunjucks/issues/416#issuecomment-206335032">מהissue הזה</a>. עכשיו ניתן לראות גם את התגובות בהתאם לדו-שיח שנוהל בזמנו:</p>
<p><img src="/img/2020/09/comments-dark.png" alt="תגובות משורשרות"></p>
<p>בפוסט הבא ארחיב על הכנת הטופס לתגובות והאינטגרציה עם הבוט של Staticman.</p>

                </div>
            </div>
        
    
        
            <div class="mb-8 border-dotted border-b pb-8 border-gray-600">
                <h2>
                    <a class="block" href="/blog/2020/07/11ty/">11ty</a>
                </h2>

                <p class="excerpt"></p>

                <span class="block md:inline md:float-left md:pt-4 pt-2 created-date" datetime="Fri Jul 31 2020 18:01:27 GMT+0000 (Coordinated Universal Time)">
                    31 ביולי 2020
                </span>

                <a class="tag" href="/tag/SSG">SSG</a><a class="tag" href="/tag/11ty">11ty</a><a class="tag" href="/tag/בלוג">בלוג</a>
                <div class="clear-both"></div>

                <div class="content post">
                    <p>המעבר לשרת חדש גרם לי לחשוב שוב על WordPress והאם הוא עדיין מתאים לבלוגים ב-2020. כאשר התחלתי את האתר, PHP הייתה אחת משתי שפות התכנות המובילות לווב (יחד עם העולה החדש דאז Ruby on Rails). מאוחר יותר זו גם הייתה שפת התכנות בה עבדתי, וזה נראה לי טבעי להמשיך איתה. מאז עברתי לסביבה חדשה מבוססת NodeJS, ו-PHP נראית לי כמו עוף מוזר (שלא לאמר דינוזאור).</p>
<p>אחרי בחינה של מספר אפשרויות, הגעתי למסקנה שהנתיב הטבעי להמשך הוא Static Site Generators (SSG). הרעיון כאן הוא ליצר את קבצי ה HTML של האתר מתוך התכנים הדינמיים, ומכאן והלאה ההגשה לדפדפן נעשית של קבצים סטטיים בלבד. מתוך <a href="https://gohugo.io/" title="HUGO">המגוון</a> <a href="https://jekyllrb.com/" title="Jekyll">הגדול</a> של <a href="https://vuepress.vuejs.org/" title="VuePress">האפשרויות</a>, בחרתי את <a href="https://www.11ty.dev/">Eleventy</a> (או בקיצור 11ty). הוא מבוסס NodeJS, ויחסית לאחיו הוותיק יותר (<a href="https://www.gatsbyjs.org/">Gatsby</a>), הוא פחות אפליקציה ויותר SSG טהור.</p>
<p>ייצור האתר נעשה ע&quot;י הגדרת תבניות והפעלה שלהן על תוכן האתר שהוא קבצי Markdown. את קבצי התוכן שומרים ב git יחד עם הקוד של האתר, כך שנוצר סוג של בלבול בינהם. כדי לבצע את ההפרדה בצורה טובה יותר וגם בגלל <a href="https://talk.commonmark.org/t/explicit-rtl-indication-in-pure-markdown/286/4" title="דיון ארוך שבסופו הוחלט שלא עושים כלום ותסדרו לבד">התמיכה הבעייתית של Markdown בעברית</a>, בחרתי להשתמש ב Headless CMS: מערכת ניהול תוכן, שבה כתיבה התכנים מנותקת מההצגה שלהן (בניגוד ל WordPress שבה העריכה והתצוגה נעשים באותה מערכת). הרעיון כאן הוא לאפשר לכותבי תוכן שאינם מכירים קוד או אפילו Markdown לערוך את התוכן דרך עורך יעודי (סטייל WordPress), כאשר הקבצים נשלחים מהעורך אל ה git-repo. יתרון משמעותי ליושבים בציון (ובשאר המזרח התיכון) הוא האפשרות לתמיכה הרבה יותר טובה בעריכה ב-RTL.</p>
<p>ל Headless CMS בחרתי את <a href="https://forestry.io/">Forestry</a> (ישנן אלטרנטיבות נוספות כמו: <a href="https://www.contentful.com/">Contentful</a>, <a href="https://www.netlifycms.org/">Netlify CMS</a>), שנראית לי הנקייה ביותר לשימוש. בניגוד ל Contentful, אין לה תמיכה מובנית ב-RTL, אבל באמצעות תפריט &quot;הפוך כוון כתיבה&quot; של Firefox, אפשר לערוך את התוכן בקלות. ל Forestry יש גם תמיכה נוחה בעריכת ה meta-data של הפוסטים (כותרת, קטגוריות וכד'), כך שמקבלים כמעט חוויה מלאה של עורך תוכן משולב, כמו שניתן לראות כאן:</p>
<p><img src="/img/2020/07/forestry-edit-post.png" alt=""></p>
<p>לצורך השוואה, כך נראה ה Markdown של אותו הפוסט ב GitHub:</p>
<p><img src="/img/2020/07/github-edit-post.png" alt=""></p>
<p>אז איך עושים את המעבר? על כך בפוסט הבא.</p>

                </div>
            </div>
        
    
</div>

  <div>
    <div class="md:flex justify-evenly mb-6">
        <div class="flex justify-between mx-auto w-full">
            
                <div class="mx-auto mb-4">
                    <a class="next-page md:mb-2" href="/page/2/">לדף הקודם</a>
                </div>
            
            
        </div>

        <div class="flex justify-between mx-auto w-full">
            

            
                <div class="mx-auto">
                    <a class="last-page" href="/page/11/">לדף האחרון</a>
                </div>
            
        </div>
    </div>

    <p class="text-center text-sm italic mb-10">(דף
        1
        מתוך
        11)</p>
</div>


    </main>
    <footer class="bg-gray-900 pb-10">
  <p class="block text-center text-sm mb-6">
    CC-BY-SA
    <a href="/">
      Yehuda Bar Nir
    </a>
    &bull; Built with <a href="https://www.11ty.dev/">11ty</a> 
    &bull; Based on <a target="_blank" href="https://github.com/reeseschultz/11r">11r</a> by
    <a target="_blank" href="https://reeseschultz.com">
      Reese Schultz
    </a>
    &bull; אתר נגיש <a href="/blog/accessibility-statement/">הצהרת נגישות</a> 
  </p>

</footer>
    
    <script src="/assets/lib/cash.js"></script>
    <script src="/assets/main.bundle.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script async src="https://ackee.yehudab.com/blog-utils.js" 
      data-ackee-server="https://ackee.yehudab.com"
      data-ackee-domain-id="9c5f49e5-e4a2-44dd-99bf-9f38e447246c"
      data-ackee-opts='{ "ignoreLocalhost": true, "detailed": true, "ignoreOwnVisits": true }'></script>
  </body>
</html>